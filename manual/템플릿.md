# 템플릿
- Type: 더 자세한 설명
- Date: 2013-10-16 01:38:03

HTML은 그냥 쓰고, Perl 코드는 `[%`와 `%]` 사이에 씁니다.

템플릿 파일은 문자열로 통째로 읽어들여서 코드 부분은 그대로 놔두고, HTML 부분은 `print "<html> ... "`과 같은 식으로 치환한 뒤, 치환된 코드를 서브루틴 참조로 만듭니다. 그렇기 때문에 `[%`와 `%]` 사이에서 구문을 종료하지 않으면 문제가 발생합니다.

	오류남: [% print "will cause error" %]
	괜찮음: [% print "will be no error"; %]

코드 부분을 닫고 열때, 중괄호를 열고 닫을 수는 있습니다. 

	[% if (1 == 1) { %]
		<span>Hello</span>
	[% } %]

HTML 부분은 쌍따옴표로 감싸기 때문에 변수를 치환합니다.

	<h1>$title</h1>

물론 HTML 부분에서 쌍따옴표를 쓸 수는 있습니다.

	<h1 class="no-problem">$title</h1>

Mdkkoji에서는 기본적으로 두가지 템플릿 파일을 사용합니다. `list.tpl`은 요청 URL이 디렉토리일 때, `view.tpl`은 요청 URL과 일치하는 파일의 접미어가 설정 파일에서 지정한 문서 파일의 접미어와 같을 때 사용됩니다. 다시 말해 
`list.tpl`은 문서 목록을 보여줄 때, `view.tpl`은 문서를 보여줄 때 사용됩니다.

두 템플릿은 모두 첫번째 인자값으로 HTTP 요청에 대한 정보가 담긴 해시 참조를 받습니다. 메서드와 URL, URL의 경로 부분과 쿼리 부분은 각각 `METHOD`, `URL`, `PATH`, `QUERY` 키에 저장됩니다. 그 밖의 요청 헤더는 소문자로 변환한 
필드 이름으로 된 키에 저장됩니다.  

`view.tpl`은 두번째 인자값으로 요청 URL에 해당하는 파일의 경로를 받습니다. 이 경로로 파일을 열면 됩니다. 
문서의 필드에 접근하고 처리하려면 `Mdkkoji::Document` 클래스를 이용합니다. 자세한 사용법은 pod를 참고하십시오.

`list.tpl`의 나머지 인자값은 쿼리를 바탕으로 만들어낸 `Mdkkoji::Document`의 인스턴스, 이것을 바탕으로 뽑아낸 
문서 목록을 나타내는 `Mdkkoji::DocList`의 인스턴스, 하위 디렉토리 목록이 담긴 배열 참조입니다.
